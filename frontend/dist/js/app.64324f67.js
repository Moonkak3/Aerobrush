(function(){var t={7686:function(t,e,n){"use strict";var r=n(5130),s=n(9005),i=n(6768);function o(t,e,n,r,s,o){const a=(0,i.g2)("HandCursor"),d=(0,i.g2)("LiveWebStream"),c=(0,i.g2)("DrawingCanvas");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(a),(0,i.bF)(d),(0,i.bF)(c)],64)}var a=n(4232);const d={class:"container"},c={class:"live-stream-container"},h={ref:"videoElement",autoplay:""},u={ref:"canvasElement"};function l(t,e,n,r,s,o){return(0,i.uX)(),(0,i.CE)("div",{class:"card",ref:"card",style:(0,a.Tr)({top:s.divTop+"px",left:s.divLeft+"px"})},[(0,i.Lk)("div",d,[(0,i.Lk)("div",c,[(0,i.Lk)("video",h,null,512),(0,i.Lk)("canvas",u,null,512)])])],4)}var f=n(9395),m=n(8897),v=n(7861);class p{constructor(t,e,n=0){this.x=t,this.y=e,this.z=n}}function w(t,e,n=!0){let r=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2);return n&&(r=Math.sqrt(r)),r}function y(t,e,n=!0){let r=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2);return n&&(r=Math.sqrt(r)),r}function g(t,e){return t.x*e.x+t.y*e.y}function b(t,e,n=.5){return new p(t.x*n+e.x*(1-n),t.y*n+e.y*(1-n))}function k(t,e,n){let r=new p(e.x-t.x,e.y-t.y),s=new p(e.x-n.x,e.y-n.y),i=new p(n.x-t.x,n.y-t.y),o=w(t,n,!1);return!(Math.abs(g(r,i))>o||Math.abs(g(s,i))>o)}function x(t){const e=Math.max(w(t[5],t[17]),w(t[17],t[0]),w(t[0],t[1]),w(t[1],t[5]));let n={pinch:!1,close:!1},r=y(t[4],t[8]),s=y(t[3],t[7]);return n.pinch=r<s&&r<e/4,n.close=k(t[0],t[12],t[10])&&k(t[0],t[16],t[14])&&k(t[0],t[20],t[18]),n}function M(t){const e=b(t[4],t[8],.75),n=b(t[3],t[6],.5),r=b(e,n,.25);return[r.x,r.y]}const C=(0,s.nY)("handCursor",{state:()=>({x:0,y:0,mode:"draw",lazyRadius:10,history:[],history_len:2,isDown:!1,isDragging:!1,lastX:0,lastY:0}),actions:{updateHandCursor(t){let[e,n]=M(t);e=1.2*e-.1,n=1.2*n-.1,e*=window.innerWidth,n*=window.innerHeight;const r=e-this.lastX,s=n-this.lastY,i=(r**2+s**2)**.5;if(i<=this.lazyRadius)return;const o=(i-this.lazyRadius)/i;this.x=this.lastX+r*o,this.y=this.lastY+s*o,this.lastX=this.x,this.lastY=this.y,this.history.unshift(x(t));while(this.history.length>this.history_len)this.history.pop();this.history.every((t=>t.pinch===this.history[0].pinch&&t.close===this.history[0].close))&&(this.gesture=this.history[0]);let a=null;this.gesture.close?this.mode="draw":this.mode="erase",a=this.gesture.pinch?"mousedown":"mouseup";let d=document.elementFromPoint(this.x,this.y)??document.body,c={bubbles:!0,cancelable:!0,clientX:this.x,clientY:this.y};const h=new MouseEvent("mousemove",c);if(d.dispatchEvent(h),this.isDown&&"mouseup"===a||!this.isDown&&"mousedown"===a){this.isDown=!this.isDown;const t=new MouseEvent(a,c);if(d.dispatchEvent(t),"mouseup"===a){const t=new MouseEvent("click",c);d.dispatchEvent(t)}}}}});var L=n(199),E=n.n(L),D={data(){return{handLandmarker:void 0,webcamRunning:!0,lastVideoTime:-1,results:void 0,gesture:void 0,handCursor:C(),divTop:20,divLeft:20}},mounted(){this.enableWebcam(),this.createHandLandmarker(),new(E())(this.$refs.card)},methods:{async createHandLandmarker(){try{const t=await f.Ps.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm");this.handLandmarker=await f.Vb.createFromOptions(t,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2}),console.log("HandLandmarker initialized.")}catch(t){console.error("Error initializing HandLandmarker:",t)}},async enableWebcam(){const t=this.$refs.videoElement,e={video:{aspectRatio:16/9}};if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const n=await navigator.mediaDevices.getUserMedia(e);t.srcObject=n,t.addEventListener("loadeddata",this.predictWebcam)}catch(n){console.error("Error accessing webcam:",n)}else console.error("getUserMedia() is not supported by your browser")},async predictWebcam(){if(!this.handLandmarker)return void console.log("HandLandmarker is not initialized yet.");const t=this.$refs.videoElement,e=this.$refs.canvasElement,n=e.getContext("2d");e.width=t.clientWidth,e.height=t.clientHeight,this.lastVideoTime!==t.currentTime&&(this.lastVideoTime=t.currentTime,this.results=await this.handLandmarker.detectForVideo(t,performance.now())),n.clearRect(0,0,e.width,e.height),this.results&&this.results.landmarks&&this.interpretLandMarks(this.results.landmarks,n),this.webcamRunning&&window.requestAnimationFrame(this.predictWebcam)},interpretLandMarks(t,e){for(const n of t){const t=n.map((t=>({...t,x:1-t.x})));(0,m.drawConnectors)(e,t,v.HAND_CONNECTIONS,{color:"#00FF00",lineWidth:1}),(0,m.drawLandmarks)(e,t,{color:"#FF0000",radius:1}),this.handCursor.updateHandCursor(t)}}}},O=n(1241);const H=(0,O.A)(D,[["render",l],["__scopeId","data-v-ede20012"]]);var $=H;const _={class:"cursor"};function F(t,e,n,r,s,o){return(0,i.uX)(),(0,i.CE)("div",_)}var T={name:"HandCursor",data(){return{handCursor:C()}},mounted(){document.addEventListener("mousemove",this.handleMouseMove)},beforeUnmount(){document.removeEventListener("mousemove",this.handleMouseMove)},methods:{handleMouseMove(t){const e=document.querySelector(".cursor");"draw"===this.handCursor.mode?(e.style.mixBlendMode="",e.style.backgroundColor="#000000",e.style.borderColor="#ffffff"):"erase"===this.handCursor.mode&&(e.style.mixBlendMode="difference",e.style.backgroundColor="#ffffff",e.style.borderColor="#000000"),e.style.left=t.clientX+"px",e.style.top=t.clientY+"px"}}};const W=(0,O.A)(T,[["render",F],["__scopeId","data-v-317714d5"]]);var z=W;const X={id:"background",ref:"background"};function j(t,e,n,r,s,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("canvas",{id:"canvas",ref:"canvas",onMousedown:e[0]||(e[0]=(...t)=>o.startDrawing&&o.startDrawing(...t)),onMousemove:e[1]||(e[1]=(...t)=>o.draw&&o.draw(...t)),onMouseup:e[2]||(e[2]=(...t)=>o.stopDrawing&&o.stopDrawing(...t))},null,544),(0,i.Lk)("canvas",X,null,512)])}var A=n(9521),P=n.n(A),R={data(){return{isDrawing:!1,path:null,eraseLayer:null,lazyRadius:10,handCursor:C()}},mounted(){this.$refs.canvas.width=1920,this.$refs.canvas.height=1080,this.$refs.canvas.left=(window.innerWidth-1920)/2,this.$refs.canvas.top=(window.innerHeight-1080)/2,this.$refs.background.width=1920,this.$refs.background.height=1080,this.$refs.background.left=(window.innerWidth-1920)/2,this.$refs.background.top=(window.innerHeight-1080)/2,P().setup(this.$refs.canvas)},beforeUnmount(){P().projects.forEach((t=>{t.remove()}))},methods:{startDrawing(){this.path=new(P().Path)({strokeColor:"black",strokeWidth:10,strokeCap:"round"}),"draw"===this.handCursor.mode?this.path.blendMode="normal":"erase"===this.handCursor.mode&&(this.path.blendMode="destination-out"),this.isDrawing=!0,P().view.draw()},draw(t){if(!this.isDrawing)return;const e=t.clientX-this.$refs.canvas.offsetLeft,n=t.clientY-this.$refs.canvas.offsetTop;this.path.add(new(P().Point)(e,n)),this.path.smooth({type:"continuous"})},stopDrawing(){this.isDrawing=!1,this.path.simplify();const t=this.path.blendMode;this.path.blendMode="normal";let e=this.path.rasterize();this.path.remove(),e.blendMode=t,P().view.draw()}}};const Y=(0,O.A)(R,[["render",j],["__scopeId","data-v-3d40a7c4"]]);var V=Y;document.body.style.cursor="none";var U={name:"App",components:{LiveWebStream:$,HandCursor:z,DrawingCanvas:V}};const I=(0,O.A)(U,[["render",o]]);var q=I;const N=(0,s.Ey)(),S=(0,r.Ef)(q);S.use(N),S.mount("#app")},6999:function(){},2965:function(){}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,r,s,i){if(!r){var o=1/0;for(h=0;h<t.length;h++){r=t[h][0],s=t[h][1],i=t[h][2];for(var a=!0,d=0;d<r.length;d++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[d])}))?r.splice(d--,1):(a=!1,i<o&&(o=i));if(a){t.splice(h--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var h=t.length;h>0&&t[h-1][2]>i;h--)t[h]=t[h-1];t[h]=[r,s,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,i,o=r[0],a=r[1],d=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(d)var h=d(n)}for(e&&e(r);c<o.length;c++)i=o[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(h)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(7686)}));r=n.O(r)})();
//# sourceMappingURL=app.64324f67.js.map