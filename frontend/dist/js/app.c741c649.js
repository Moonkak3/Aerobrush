(function(){"use strict";var t={499:function(t,e,s){var n=s(5130),i=s(9005),r=s(6768);function a(t,e,s,n,i,a){const o=(0,r.g2)("HandCursor"),h=(0,r.g2)("LiveWebStream"),d=(0,r.g2)("DrawingCanvas");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(o),(0,r.bF)(h),(0,r.bF)(d)],64)}var o=s(4232);const h={class:"container"},d={class:"live-stream-container"},u={ref:"videoElement",autoplay:""},c={ref:"canvasElement"},l={class:"text-container"};function g(t,e,s,n,i,a){return(0,r.uX)(),(0,r.CE)("div",{class:"card",style:(0,o.Tr)({top:i.divTop+"px",left:i.divLeft+"px"}),onMousedown:e[0]||(e[0]=(...t)=>a.startDragging&&a.startDragging(...t)),onMousemove:e[1]||(e[1]=(...t)=>a.dragging&&a.dragging(...t)),onMouseup:e[2]||(e[2]=(...t)=>a.stopDragging&&a.stopDragging(...t))},[(0,r.Lk)("div",h,[(0,r.Lk)("div",d,[(0,r.Lk)("video",u,null,512),(0,r.Lk)("canvas",c,null,512)])]),(0,r.Lk)("div",l,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.gesture,((t,e)=>((0,r.uX)(),(0,r.CE)("h1",{key:e},(0,o.v_)(e)+": "+(0,o.v_)(t),1)))),128))])],36)}var f=s(9395),v=s(8897),m=s(7861);class p{constructor(t,e,s=0){this.x=t,this.y=e,this.z=s}}function w(t,e,s=!0){let n=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2);return s&&(n=Math.sqrt(n)),n}function y(t,e,s=!0){let n=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2);return s&&(n=Math.sqrt(n)),n}function b(t,e){return t.x*e.x+t.y*e.y}function x(t,e,s=.5){return new p(t.x*s+e.x*(1-s),t.y*s+e.y*(1-s))}function C(t,e,s){let n=new p(e.x-t.x,e.y-t.y),i=new p(e.x-s.x,e.y-s.y),r=new p(s.x-t.x,s.y-t.y),a=w(t,s,!1);return!(Math.abs(b(n,r))>a||Math.abs(b(i,r))>a)}function k(t){const e=Math.max(w(t[5],t[17]),w(t[17],t[0]),w(t[0],t[1]),w(t[1],t[5]));let s={pinch:!1,close:!1},n=y(t[4],t[8]),i=y(t[3],t[7]);return s.pinch=n<i&&n<e/4,s.close=C(t[0],t[12],t[10])&&C(t[0],t[16],t[14])&&C(t[0],t[20],t[18]),s}function D(t){const e=x(t[4],t[8],.75),s=x(t[3],t[6],.5),n=x(e,s,.25);return[n.x,n.y]}const L=(0,i.nY)("handCursor",{state:()=>({x:0,y:0,mode:"draw",lazyRadius:0})});var M={data(){return{handLandmarker:void 0,webcamRunning:!0,lastVideoTime:-1,results:void 0,gesture:void 0,history:[],isDown:!1,isDragging:!1,lastX:0,lastY:0,startX:0,startY:0,handCursor:L(),divTop:20,divLeft:20}},mounted(){this.enableWebcam(),this.createHandLandmarker()},methods:{async createHandLandmarker(){try{const t=await f.Ps.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm");this.handLandmarker=await f.Vb.createFromOptions(t,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2}),console.log("HandLandmarker initialized.")}catch(t){console.error("Error initializing HandLandmarker:",t)}},async enableWebcam(){const t=this.$refs.videoElement,e={video:{aspectRatio:16/9}};if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const s=await navigator.mediaDevices.getUserMedia(e);t.srcObject=s,t.addEventListener("loadeddata",this.predictWebcam)}catch(s){console.error("Error accessing webcam:",s)}else console.error("getUserMedia() is not supported by your browser")},async predictWebcam(){if(!this.handLandmarker)return void console.log("HandLandmarker is not initialized yet.");const t=this.$refs.videoElement,e=this.$refs.canvasElement,s=e.getContext("2d");e.width=t.clientWidth,e.height=t.clientHeight,this.lastVideoTime!==t.currentTime&&(this.lastVideoTime=t.currentTime,this.results=await this.handLandmarker.detectForVideo(t,performance.now())),s.clearRect(0,0,e.width,e.height),this.results&&this.results.landmarks&&this.interpretLandMarks(this.results.landmarks,s),this.webcamRunning&&window.requestAnimationFrame(this.predictWebcam)},interpretLandMarks(t,e){for(const s of t){const t=s.map((t=>({...t,x:1-t.x})));(0,v.drawConnectors)(e,t,m.HAND_CONNECTIONS,{color:"#00FF00",lineWidth:2}),(0,v.drawLandmarks)(e,t,{color:"#FF0000",lineWidth:.5}),this.gesture=k(t),this.history.unshift(this.gesture);while(this.history.length>10)this.history.pop();let[n,i]=D(t);this.updateHandCursor(n,i)}},updateHandCursor(t,e){let s=null;this.gesture.close?this.handCursor.mode="draw":this.handCursor.mode="erase",s=this.gesture.pinch?"mousedown":"mouseup",t*=window.innerWidth,e*=window.innerHeight;const n=t-this.lastX,i=e-this.lastY,r=(n**2+i**2)**.5;if(console.log(r),r<=this.handCursor.lazyRadius)return;const a=(r-this.handCursor.lazyRadius)/r;this.handCursor.x=this.lastX+n*a,this.handCursor.y=this.lastY+i*a,this.lastX=this.handCursor.x,this.lastY=this.handCursor.y;let o=document.elementFromPoint(t,e)??document.body,h={bubbles:!0,cancelable:!0,clientX:this.handCursor.x,clientY:this.handCursor.y};const d=new MouseEvent("mousemove",h);if(o.dispatchEvent(d),this.isDown&&"mouseup"===s||!this.isDown&&"mousedown"===s){this.isDown=!this.isDown;const t=new MouseEvent(s,h);if(o.dispatchEvent(t),"mouseup"===s){const t=new MouseEvent("click",h);o.dispatchEvent(t)}}},startDragging(){this.isDragging=!0,this.startX=this.handCursor.x-this.divLeft,this.startY=this.handCursor.y-this.divTop,document.body.addEventListener("mousemove",this.dragging),document.body.addEventListener("mouseup",this.stopDragging)},dragging(){this.isDragging&&(this.divLeft=this.handCursor.x-this.startX,this.divTop=this.handCursor.y-this.startY)},stopDragging(){this.isDragging=!1,document.body.removeEventListener("mousemove",this.dragging),document.body.removeEventListener("mouseup",this.stopDragging)}}},X=s(1241);const E=(0,X.A)(M,[["render",g],["__scopeId","data-v-95e5a822"]]);var Y=E;const T={class:"cursor"};function O(t,e,s,n,i,a){return(0,r.uX)(),(0,r.CE)("div",T)}var H={name:"HandCursor",data(){return{handCursor:L()}},mounted(){document.addEventListener("mousemove",this.handleMouseMove)},beforeUnmount(){document.removeEventListener("mousemove",this.handleMouseMove)},methods:{handleMouseMove(t){const e=document.querySelector(".cursor");"draw"===this.handCursor.mode?(e.style.backgroundColor="#000000",e.style.borderColor="#ffffff"):"erase"===this.handCursor.mode&&(e.style.backgroundColor="transparent",e.style.borderColor="#000000"),e.style.left=t.clientX+"px",e.style.top=t.clientY+"px"}}};const $=(0,X.A)(H,[["render",O],["__scopeId","data-v-5ce7dd58"]]);var F=$;const W={id:"background",ref:"background"};function _(t,e,s,n,i,a){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("canvas",{id:"canvas",ref:"canvas",onMousedown:e[0]||(e[0]=(...t)=>a.startDrawing&&a.startDrawing(...t)),onMousemove:e[1]||(e[1]=(...t)=>a.draw&&a.draw(...t)),onMouseup:e[2]||(e[2]=(...t)=>a.stopDrawing&&a.stopDrawing(...t))},null,544),(0,r.Lk)("canvas",W,null,512)])}var z={data(){return{isDrawing:!1,ctx:null,lastX:[],lastY:[],lazyRadius:10,smoothing:"bezier",handCursor:L()}},mounted(){this.$refs.canvas.width=1920,this.$refs.canvas.height=1080,this.$refs.canvas.left=(window.innerWidth-1920)/2,this.$refs.canvas.top=(window.innerHeight-1080)/2,this.$refs.background.width=1920,this.$refs.background.height=1080,this.$refs.background.left=(window.innerWidth-1920)/2,this.$refs.background.top=(window.innerHeight-1080)/2,this.ctx=this.$refs.canvas.getContext("2d"),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=5,this.ctx.strokeStyle="#000000"},methods:{startDrawing(t){this.isDrawing=!0,this.lastX=[],this.lastY=[],this.lastX.unshift(t.clientX-this.$refs.canvas.offsetLeft),this.lastY.unshift(t.clientY-this.$refs.canvas.offsetTop);while(this.lastX.length>3)this.lastX.pop();while(this.lastY.length>3)this.lastY.pop()},draw(t){if(!this.isDrawing)return;const e=t.clientX-this.$refs.canvas.offsetLeft,s=t.clientY-this.$refs.canvas.offsetTop;"draw"===this.handCursor.mode?this.ctx.globalCompositeOperation="source-over":"erase"===this.handCursor.mode&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.beginPath(),"bezier"===this.smoothing?(this.ctx.moveTo(this.lastX[2],this.lastY[2]),this.ctx.bezierCurveTo(this.lastX[1],this.lastY[1],this.lastX[0],this.lastY[0],e,s)):"quadratic"===this.smoothing?(this.ctx.moveTo(this.lastX[1],this.lastY[1]),this.ctx.quadraticCurveTo(this.lastX[0],this.lastY[0],e,s)):"none"===this.smoothing&&(this.ctx.moveTo(this.lastX[0],this.lastY[0]),this.ctx.lineTo(e,s)),this.ctx.stroke(),this.lastX.unshift(e),this.lastY.unshift(s);while(this.lastX.length>3)this.lastX.pop();while(this.lastY.length>3)this.lastY.pop()},stopDrawing(){this.lastX=[],this.lastY=[],this.isDrawing=!1}}};const j=(0,X.A)(z,[["render",_],["__scopeId","data-v-7fefd568"]]);var A=j,R={name:"App",components:{LiveWebStream:Y,HandCursor:F,DrawingCanvas:A}};const P=(0,X.A)(R,[["render",a]]);var V=P;const q=(0,i.Ey)(),I=(0,n.Ef)(V);I.use(q),I.mount("#app")}},e={};function s(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,n,i,r){if(!n){var a=1/0;for(u=0;u<t.length;u++){n=t[u][0],i=t[u][1],r=t[u][2];for(var o=!0,h=0;h<n.length;h++)(!1&r||a>=r)&&Object.keys(s.O).every((function(t){return s.O[t](n[h])}))?n.splice(h--,1):(o=!1,r<a&&(a=r));if(o){t.splice(u--,1);var d=i();void 0!==d&&(e=d)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[n,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,r,a=n[0],o=n[1],h=n[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(h)var u=h(s)}for(e&&e(n);d<a.length;d++)r=a[d],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(499)}));n=s.O(n)})();
//# sourceMappingURL=app.c741c649.js.map