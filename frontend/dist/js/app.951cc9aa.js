(function(){var e={5585:function(e,t,n){"use strict";var s=n(5130),r=n(6768);function i(e,t,n,s,i,o){const a=(0,r.g2)("HandCursor"),c=(0,r.g2)("BrushSettings"),d=(0,r.g2)("LiveWebStream"),l=(0,r.g2)("DrawingCanvas");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(a,{class:"cursor"}),(0,r.bF)(c,{class:"UI"}),(0,r.bF)(d,{class:"UI"}),(0,r.bF)(l,{class:"drawing-canvas"})],64)}const o={ref:"card"},a={class:"live-stream-container"},c={ref:"videoElement",autoplay:""},d={ref:"canvasElement"};function l(e,t,n,s,i,l){const u=(0,r.g2)("Card");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(u,{style:{display:"inline-block"},class:"container"},{header:(0,r.k6)((()=>[(0,r.Lk)("div",a,[(0,r.Lk)("video",c,null,512),(0,r.Lk)("canvas",d,null,512)])])),_:1})],512)}var u=n(9395),h=n(8897),m=n(7861),f=n(9005);class p{constructor(e,t,n=0){this.x=e,this.y=t,this.z=n}}function v(e,t,n=!0){let s=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2);return n&&(s=Math.sqrt(s)),s}function b(e,t,n=!0){let s=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2);return n&&(s=Math.sqrt(s)),s}function w(e,t){return e.x*t.x+e.y*t.y}function g(e,t,n=.5){return new p(e.x*n+t.x*(1-n),e.y*n+t.y*(1-n))}function y(e,t,n){let s=new p(t.x-e.x,t.y-e.y),r=new p(t.x-n.x,t.y-n.y),i=new p(n.x-e.x,n.y-e.y),o=v(e,n,!1);return!(Math.abs(w(s,i))>o||Math.abs(w(r,i))>o)}function k(e){const t=Math.max(v(e[5],e[17]),v(e[17],e[0]),v(e[0],e[1]),v(e[1],e[5]));let n={pinch:!1,close:!1},s=b(e[4],e[8]),r=b(e[3],e[7]);return n.pinch=s<r&&s<t/4,n.close=y(e[0],e[12],e[10])&&y(e[0],e[16],e[14])&&y(e[0],e[20],e[18]),n}function C(e){const t=g(e[4],e[8],.75),n=g(e[3],e[6],.5),s=g(t,n,.25);return[s.x,s.y]}let M=!1,x=null,z=null;function E(e,t,n){const s=document.elementFromPoint(e,t);if(!s)return;const r=new MouseEvent("mousemove",{clientX:e,clientY:t,view:window,bubbles:!0,cancelable:!0});if(s.dispatchEvent(r),s!==x){if(x){const n=new MouseEvent("mouseout",{clientX:e,clientY:t,view:window,bubbles:!0,cancelable:!0,relatedTarget:s});x.dispatchEvent(n)}if(s){const n=new MouseEvent("mouseover",{clientX:e,clientY:t,view:window,bubbles:!0,cancelable:!0,relatedTarget:x});s.dispatchEvent(n)}x=s}if(n&&!M){M=!0,z=s;const n=new MouseEvent("mousedown",{clientX:e,clientY:t,view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(n)}if(!n&&M){M=!1;const n=new MouseEvent("mouseup",{clientX:e,clientY:t,view:window,bubbles:!0,cancelable:!0});if(s.dispatchEvent(n),s===z){const n=new MouseEvent("click",{clientX:e,clientY:t,view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(n)}z=null}}const L=(0,f.nY)("handCursor",{state:()=>({x:0,y:0,mode:"draw",lazyRadius:10,history:[],history_len:2,isDown:!1,isDragging:!1,lastX:0,lastY:0}),actions:{updateHandCursor(e){let[t,n]=C(e);t=1.2*t-.1,n=1.2*n-.1,t*=window.innerWidth,n*=window.innerHeight;const s=t-this.lastX,r=n-this.lastY,i=(s**2+r**2)**.5;if(i<=this.lazyRadius)return;const o=(i-this.lazyRadius)/i;this.x=this.lastX+s*o,this.y=this.lastY+r*o,this.lastX=this.x,this.lastY=this.y,this.history.unshift(k(e));while(this.history.length>this.history_len)this.history.pop();this.history.every((e=>e.pinch===this.history[0].pinch&&e.close===this.history[0].close))&&(this.gesture=this.history[0]),this.gesture.close?this.mode="draw":this.mode="erase",E(this.x,this.y,this.gesture.pinch)}}});var V=n(3346),F={components:{Card:V.A},data(){return{handLandmarker:void 0,webcamRunning:!0,lastVideoTime:-1,results:void 0,gesture:void 0,handCursor:L()}},mounted(){this.enableWebcam(),this.createHandLandmarker()},methods:{async createHandLandmarker(){try{const e=await u.Ps.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm");this.handLandmarker=await u.Vb.createFromOptions(e,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2}),console.log("HandLandmarker initialized.")}catch(e){console.error("Error initializing HandLandmarker:",e)}},async enableWebcam(){const e=this.$refs.videoElement,t={video:{aspectRatio:16/9}};if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const n=await navigator.mediaDevices.getUserMedia(t);e.srcObject=n,e.addEventListener("loadeddata",this.predictWebcam)}catch(n){console.error("Error accessing webcam:",n)}else console.error("getUserMedia() is not supported by your browser")},async predictWebcam(){if(!this.handLandmarker)return void console.log("HandLandmarker is not initialized yet.");const e=this.$refs.videoElement,t=this.$refs.canvasElement,n=t.getContext("2d");t.width=e.clientWidth,t.height=e.clientHeight,this.lastVideoTime!==e.currentTime&&(this.lastVideoTime=e.currentTime,this.results=await this.handLandmarker.detectForVideo(e,performance.now())),n.clearRect(0,0,t.width,t.height),this.results&&this.results.landmarks&&this.interpretLandMarks(this.results.landmarks,n),this.webcamRunning&&window.requestAnimationFrame(this.predictWebcam)},interpretLandMarks(e,t){for(const n of e){const e=n.map((e=>({...e,x:1-e.x})));(0,h.drawConnectors)(t,e,m.HAND_CONNECTIONS,{color:"#00FF00",lineWidth:1}),(0,h.drawLandmarks)(t,e,{color:"#FF0000",radius:1}),this.handCursor.updateHandCursor(e)}}}},S=n(1241);const _=(0,S.A)(F,[["render",l],["__scopeId","data-v-1d4a96bf"]]);var Y=_;const D={class:"container"};function H(e,t,n,s,i,o){const a=(0,r.g2)("SliderInput"),c=(0,r.g2)("b-colorpicker");return(0,r.uX)(),(0,r.CE)("div",D,[(0,r.bF)(a,{class:"size",modelValue:o.currentMode.size,"onUpdate:modelValue":t[0]||(t[0]=e=>o.currentMode.size=e),min:1,max:100,step:1},null,8,["modelValue"]),(0,r.bF)(c,{modelValue:this.brush.color,"onUpdate:modelValue":t[1]||(t[1]=e=>this.brush.color=e),position:"is-top-left",representation:"triangle"},null,8,["modelValue"]),(0,r.bF)(a,{class:"opacity",modelValue:o.currentMode.opacity,"onUpdate:modelValue":t[2]||(t[2]=e=>o.currentMode.opacity=e),min:0,max:1,step:.01},null,8,["modelValue"])])}const X=(0,f.nY)("brush",{state:()=>({color:"#0000FF",size:10,opacity:.5})}),$=(0,f.nY)("eraser",{state:()=>({color:"#000000",size:20,opacity:1})});var O=n(4232);const A={class:"slider vertical"};function T(e,t,n,s,i,o){return(0,r.uX)(),(0,r.CE)("div",A,[(0,r.Lk)("div",{ref:"track",class:"track",onMousedown:t[0]||(t[0]=(...e)=>o.startSliding&&o.startSliding(...e))},[(0,r.Lk)("div",{ref:"thumb",class:"thumb",style:(0,O.Tr)({bottom:`${o.valuePercentage}%`})},null,4),(0,r.Lk)("div",{ref:"progress",class:"progress",style:(0,O.Tr)({height:`${o.valuePercentage+10}%`})},null,4)],544)])}var W={name:"SliderInput",props:{modelValue:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1}},data(){return{isSliding:!1,startY:0,startValue:this.modelValue}},computed:{valuePercentage(){return(this.modelValue-this.min)/(this.max-this.min)*90}},mounted(){window.addEventListener("mousemove",this.slide),window.addEventListener("mouseup",this.stopSliding)},beforeUnmount(){window.removeEventListener("mousemove",this.slide),window.removeEventListener("mouseup",this.stopSliding)},methods:{startSliding(e){this.isSliding=!0,this.startY=e.clientY,this.startValue=this.modelValue},slide(e){if(!this.isSliding)return;const t=this.$refs.track.clientHeight,n=this.startY-e.clientY,s=Math.max(this.min,Math.min(this.max,this.startValue+n/t*(this.max-this.min))),r=Math.round(s/this.step)*this.step,i=Math.max(this.min,Math.min(this.max,r));this.$emit("update:modelValue",i)},stopSliding(){this.isSliding=!1}}};const I=(0,S.A)(W,[["render",T],["__scopeId","data-v-47a3a028"]]);var U=I,P={components:{SliderInput:U},data(){return{handCursor:L(),brush:X(),eraser:$(),opacity:1,size:5,color:"#0000FF"}},computed:{currentMode(){return"draw"===this.handCursor.mode?this.brush:"erase"===this.handCursor.mode?this.eraser:this.brush}},mounted(){this.unwatchHandCursor=(0,r.wB)(this.handCursor,(e=>{"draw"===e.mode?(this.opacity=this.brush.opacity,this.size=this.brush.size):"erase"==e.mode&&(this.opacity=this.eraser.opacity,this.size=this.eraser.size)}))},beforeUnmount(){this.unwatchHandCursor()}};const j=(0,S.A)(P,[["render",H],["__scopeId","data-v-fa7c4ee6"]]);var N=j;const R={class:"cursor"};function B(e,t,n,s,i,o){return(0,r.uX)(),(0,r.CE)("div",R)}var q={name:"HandCursor",data(){return{handCursor:L(),brush:X()}},mounted(){document.addEventListener("mousemove",this.handleMouseMove)},beforeUnmount(){document.removeEventListener("mousemove",this.handleMouseMove)},methods:{handleMouseMove(e){const t=document.querySelector(".cursor");"draw"===this.handCursor.mode?(t.style.mixBlendMode="",t.style.backgroundColor=this.brush.color,t.style.borderColor="#ffffff"):"erase"===this.handCursor.mode&&(t.style.mixBlendMode="difference",t.style.backgroundColor="#ffffff",t.style.borderColor=this.brush.color),t.style.left=e.clientX+"px",t.style.top=e.clientY+"px"}}};const G=(0,S.A)(q,[["render",B],["__scopeId","data-v-9e8fbd24"]]);var K=G;const J={id:"background",ref:"background"};function Q(e,t,n,s,i,o){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("canvas",{id:"canvas",ref:"canvas",onMousedown:t[0]||(t[0]=(...e)=>o.startDrawing&&o.startDrawing(...e)),onMousemove:t[1]||(t[1]=(...e)=>o.draw&&o.draw(...e)),onMouseup:t[2]||(t[2]=(...e)=>o.stopDrawing&&o.stopDrawing(...e))},null,544),(0,r.Lk)("canvas",J,null,512)])}var Z=n(9521),ee=n.n(Z),te={data(){return{isDrawing:!1,path:null,eraseLayer:null,lazyRadius:10,handCursor:L(),brush:X(),eraser:$()}},mounted(){this.$refs.canvas.width=1920,this.$refs.canvas.height=1080,this.$refs.canvas.left=(window.innerWidth-1920)/2,this.$refs.canvas.top=(window.innerHeight-1080)/2,this.$refs.background.width=1920,this.$refs.background.height=1080,this.$refs.background.left=(window.innerWidth-1920)/2,this.$refs.background.top=(window.innerHeight-1080)/2,ee().setup(this.$refs.canvas)},beforeUnmount(){ee().projects.forEach((e=>{e.remove()}))},methods:{startDrawing(){"draw"===this.handCursor.mode?this.path=new(ee().Path)({strokeColor:this.brush.color,strokeWidth:this.brush.size,opacity:this.brush.opacity,strokeCap:"round",blendMode:"normal"}):"erase"===this.handCursor.mode&&(this.path=new(ee().Path)({strokeColor:this.eraser.color,strokeWidth:this.eraser.size,opacity:this.eraser.opacity,strokeCap:"round",blendMode:"destination-out"})),this.isDrawing=!0,ee().view.draw()},draw(e){if(!this.isDrawing)return;const t=e.clientX-this.$refs.canvas.offsetLeft,n=e.clientY-this.$refs.canvas.offsetTop;this.path.add(new(ee().Point)(t,n)),this.path.smooth({type:"continuous"})},stopDrawing(){if(!this.path)return;this.isDrawing=!1,this.path.simplify();const e=this.path.blendMode;this.path.blendMode="normal";let t=this.path.rasterize();this.path.remove(),t.blendMode=e,ee().view.draw()}}};const ne=(0,S.A)(te,[["render",Q],["__scopeId","data-v-c4ca216a"]]);var se=ne;document.body.style.cursor="none";var re={name:"App",components:{BrushSettings:N,LiveWebStream:Y,HandCursor:K,DrawingCanvas:se}};const ie=(0,S.A)(re,[["render",i],["__scopeId","data-v-093ef1ca"]]);var oe=ie,ae=n(7287),ce=n(3813),de=n(8783),le=n(2187),ue=n(786);n(1457);const he=(0,f.Ey)(),me=(0,s.Ef)(oe);me.use(he);const fe=(0,ce.FA)(le.A,{semantic:{primary:{50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},colorScheme:{light:{primary:{color:"{zinc.950}",inverseColor:"#ffffff",hoverColor:"{zinc.900}",activeColor:"{zinc.800}"},highlight:{background:"{zinc.950}",focusBackground:"{zinc.700}",color:"#ffffff",focusColor:"#ffffff"}},dark:{primary:{color:"{zinc.50}",inverseColor:"{zinc.950}",hoverColor:"{zinc.100}",activeColor:"{zinc.200}"},highlight:{background:"rgba(250, 250, 250, .16)",focusBackground:"rgba(250, 250, 250, .24)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"}}}}});me.use(ae.Ay,{theme:{base:de.A,preset:fe,options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}}}),me.use(ue.Ay),me.mount("#app")},6999:function(){},2965:function(){}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,s,r,i){if(!s){var o=1/0;for(l=0;l<e.length;l++){s=e[l][0],r=e[l][1],i=e[l][2];for(var a=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(a=!1,i<o&&(o=i));if(a){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[s,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,o=s[0],a=s[1],c=s[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(c)var l=c(n)}for(t&&t(s);d<o.length;d++)i=o[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(5585)}));s=n.O(s)})();
//# sourceMappingURL=app.951cc9aa.js.map